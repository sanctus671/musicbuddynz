{"version":3,"sources":["./src/app/pages/manage-payments/manage-payments.page.html","./src/app/pages/manage-payments/manage-payments-routing.module.ts","./src/app/pages/manage-payments/manage-payments.module.ts","./src/app/pages/manage-payments/manage-payments.page.scss","./src/app/pages/manage-payments/manage-payments.page.ts"],"names":[],"mappings":"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","file":"pages-manage-payments-manage-payments-module.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-button>\\n                <ion-back-button defaultHref=\\\"/tabs/jobs\\\"></ion-back-button>\\n            </ion-button>            \\n        </ion-buttons>   \\n        \\n        <ion-title>Manage Payments</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"manage-payments\\\">\\n    \\n    <div class=\\\"manage-payments__loading\\\" *ngIf=\\\"loading\\\">\\n        <ion-spinner color=\\\"primary\\\"></ion-spinner>\\n    </div>    \\n\\n    <div class=\\\"manage-payments__empty\\\" *ngIf=\\\"payments.length < 1 && !loading\\\">\\n        <ion-icon name=\\\"card\\\"></ion-icon>\\n        <h2>No Payments Due</h2>\\n    </div>     \\n    \\n    \\n    <ion-list class=\\\"manage-payments__list\\\"  *ngIf=\\\"payments.length > 0\\\"> \\n        \\n        <div class=\\\"manage-payments__list__user\\\"  >\\n            <ion-item *ngFor=\\\"let payment of payments\\\" [routerLink]=\\\"['/profile/' + payment.profile.user_id]\\\" routerDirection=\\\"forward\\\">  \\n                <ion-avatar slot=\\\"start\\\" *ngIf=\\\"payment.profile.avatar\\\">\\n                    <img [src]=\\\"payment.profile.avatar\\\" />\\n                </ion-avatar>                  \\n                <ion-label class=\\\"ion-text-wrap\\\">                    \\n                    <h2>{{payment.profile.name}}</h2>\\n                    <h3>Owed ${{payment.total | number:'1.2-2'}}</h3>\\n                    <p>Bank account: {{payment.profile.bank_account ? payment.profile.bank_account : 'None set'}}</p>\\n                </ion-label>\\n                <ion-button slot=\\\"end\\\" fill=\\\"outline\\\" (click)=\\\"markAsPaid($event,payment)\\\" [disabled]=\\\"payment.status === 'userpaid'\\\">\\n                    <span *ngIf=\\\"payment.status !== 'userpaid'\\\">Mark As Paid</span>\\n                    <span *ngIf=\\\"payment.status === 'userpaid'\\\">Paid</span>\\n                </ion-button>\\n            </ion-item>                 \\n        </div>\\n        \\n        \\n    </ion-list>    \\n    \\n    \\n\\n</ion-content>\\n\\n\\n\\n<ion-footer class=\\\"manage-payments-footer\\\">\\n    \\n    <ion-button color='primary' class=\\\"manage-payments-footer__button\\\" (click)=\\\"markAllPaid()\\\">\\n        Mark All Paid\\n    </ion-button>    \\n    \\n    <ion-button color='light' class=\\\"manage-payments-footer__button\\\" (click)=\\\"getBankFile()\\\">\\n        Generate Bank File\\n    </ion-button>  \\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ManagePaymentsPage } from './manage-payments.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ManagePaymentsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ManagePaymentsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ManagePaymentsPageRoutingModule } from './manage-payments-routing.module';\n\nimport { ManagePaymentsPage } from './manage-payments.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ManagePaymentsPageRoutingModule\n  ],\n  declarations: [ManagePaymentsPage]\n})\nexport class ManagePaymentsPageModule {}\n","export default \".manage-payments .manage-payments__loading {\\n  text-align: center;\\n  margin-top: 60px;\\n}\\n.manage-payments .manage-payments__empty {\\n  text-align: center;\\n  opacity: 0.2;\\n  padding-top: 60px;\\n  padding-bottom: 60px;\\n}\\n.manage-payments .manage-payments__empty ion-icon {\\n  font-size: 60px;\\n}\\n.manage-payments .manage-payments__empty h2 {\\n  margin: 0px;\\n  margin-top: 5px;\\n  font-size: 22px;\\n}\\n.manage-payments-footer {\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbWFuYWdlLXBheW1lbnRzL0Q6XFxUYXlsb3JcXERvY3VtZW50c1xcV2Vic2l0ZXNcXG11c2ljYnVkZHlcXGFwcC9zcmNcXGFwcFxccGFnZXNcXG1hbmFnZS1wYXltZW50c1xcbWFuYWdlLXBheW1lbnRzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvbWFuYWdlLXBheW1lbnRzL21hbmFnZS1wYXltZW50cy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUk7RUFDSSxrQkFBQTtFQUNBLGdCQUFBO0FDRFI7QURLSTtFQUNJLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0Esb0JBQUE7QUNIUjtBREtRO0VBQ0ksZUFBQTtBQ0haO0FETVE7RUFDSSxXQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7QUNKWjtBRFVBO0VBQ0ksa0JBQUE7QUNQSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21hbmFnZS1wYXltZW50cy9tYW5hZ2UtcGF5bWVudHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1hbmFnZS1wYXltZW50c3tcclxuICAgIFxyXG4gICAgLm1hbmFnZS1wYXltZW50c19fbG9hZGluZ3tcclxuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgbWFyZ2luLXRvcDogNjBweDsgICAgICAgIFxyXG4gICAgfSAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIC5tYW5hZ2UtcGF5bWVudHNfX2VtcHR5e1xyXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICBvcGFjaXR5OiAwLjI7XHJcbiAgICAgICAgcGFkZGluZy10b3A6IDYwcHg7XHJcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDYwcHg7ICBcclxuXHJcbiAgICAgICAgaW9uLWljb257XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogNjBweDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGgye1xyXG4gICAgICAgICAgICBtYXJnaW46IDBweDtcclxuICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDIycHg7ICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG5cclxuLm1hbmFnZS1wYXltZW50cy1mb290ZXJ7XHJcbiAgICB0ZXh0LWFsaWduOmNlbnRlcjtcclxufSIsIi5tYW5hZ2UtcGF5bWVudHMgLm1hbmFnZS1wYXltZW50c19fbG9hZGluZyB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogNjBweDtcbn1cbi5tYW5hZ2UtcGF5bWVudHMgLm1hbmFnZS1wYXltZW50c19fZW1wdHkge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG9wYWNpdHk6IDAuMjtcbiAgcGFkZGluZy10b3A6IDYwcHg7XG4gIHBhZGRpbmctYm90dG9tOiA2MHB4O1xufVxuLm1hbmFnZS1wYXltZW50cyAubWFuYWdlLXBheW1lbnRzX19lbXB0eSBpb24taWNvbiB7XG4gIGZvbnQtc2l6ZTogNjBweDtcbn1cbi5tYW5hZ2UtcGF5bWVudHMgLm1hbmFnZS1wYXltZW50c19fZW1wdHkgaDIge1xuICBtYXJnaW46IDBweDtcbiAgbWFyZ2luLXRvcDogNXB4O1xuICBmb250LXNpemU6IDIycHg7XG59XG5cbi5tYW5hZ2UtcGF5bWVudHMtZm9vdGVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { AlertController} from '@ionic/angular';\nimport {AdminService} from '../../services/admin/admin.service';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\n\n\n@Component({\n    selector: 'app-manage-payments',\n    templateUrl: './manage-payments.page.html',\n    styleUrls: ['./manage-payments.page.scss'],\n})\nexport class ManagePaymentsPage implements OnInit {\n    \n    \n    public payments:Array<any>;\n    public loading:boolean;\n    \n    constructor(private adminService:AdminService, private alertCtrl: AlertController, private iab: InAppBrowser) { \n    \n        this.payments = [];\n        \n        this.loading = true;\n        this.adminService.getPayments().then((data:Array<any>) => {\n            this.loading = false;\n            this.payments = data;\n        }).catch(() => {\n            this.loading = false;\n        })\n    \n    }\n\n    ngOnInit() {\n    }\n    \n    \n    public getPayments(){\n        \n    }\n    \n    \n    public markAsPaid(ev,payment){\n        ev.stopPropagation();\n        ev.preventDefault();\n        \n        let alert = this.alertCtrl.create({\n            header: 'Are you sure?',\n            message: 'You are about to mark this user as paid. Ensure you have paid this user before you continue.',\n            buttons: [\n                {\n                    text: 'Cancel',\n                    role: 'cancel',\n                    handler: data => {\n                    }  \n                },\n                {\n                    text: 'Continue',\n                    handler: data => {\n                        let total = payment.total;\n                        \n                        payment.status = \"userpaid\";\n                        payment.total = 0;\n                        this.adminService.markAsPaid(payment.profile.user_id).then(() => {\n                        }).catch(() => {\n                            payment.status = \"\";\n                            payment.total = total;\n                        })\n                        \n                    }  \n                }                \n            ] \n        }).then((el) => {\n            el.present();\n        });         \n        \n    }\n    \n    \n    public markAllPaid(){\n        \n        let alert = this.alertCtrl.create({\n            header: 'Are you sure?',\n            message: 'You are about to mark all payments as paid. Ensure you have paid all users before you continue.',\n            buttons: [\n                {\n                    text: 'Cancel',\n                    role: 'cancel',\n                    handler: data => {\n                    }  \n                },\n                {\n                    text: 'Continue',\n                    handler: data => {\n                        \n                        for(let payment of this.payments){\n                            payment.status = \"userpaid\";\n                            payment.total = 0;                            \n                        }\n                        \n                        \n                        this.adminService.markAllAsPaid().then(() => {}).catch(() => {})\n                        \n                    }  \n                }                \n            ] \n        }).then((el) => {\n            el.present();\n        });         \n        \n    }   \n    \n    \n    \n    public getBankFile(){\n        this.adminService.getBankFile().then((data:any) => {\n            this.iab.create(data.file, \"_system\");\n        })\n    } \n    \n\n}\n"],"sourceRoot":"webpack:///"}