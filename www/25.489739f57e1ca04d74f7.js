(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{eSzt:function(n,t,e){"use strict";e.r(t),e.d(t,"ManagePaymentsPageModule",(function(){return k}));var a=e("Valr"),i=e("QJY3"),o=e("sPEm"),r=e("DUip"),c=e("mrSG"),s=e("TYT/"),b=e("VKgo"),l=e("m/P+");function u(n,t){1&n&&(s.Mb(0,"div",9),s.Kb(1,"ion-spinner",10),s.Lb())}function p(n,t){1&n&&(s.Mb(0,"div",11),s.Kb(1,"ion-icon",12),s.Mb(2,"h2"),s.lc(3,"No Payments Due"),s.Lb(),s.Lb())}function m(n,t){if(1&n&&(s.Mb(0,"ion-avatar",0),s.Kb(1,"img",21),s.Lb()),2&n){var e=s.Wb().$implicit;s.zb(1),s.bc("src",e.profile.avatar,s.ic)}}function f(n,t){1&n&&(s.Mb(0,"span"),s.lc(1,"Mark As Paid"),s.Lb())}function g(n,t){1&n&&(s.Mb(0,"span"),s.lc(1,"Paid"),s.Lb())}var d=function(n){return[n]};function y(n,t){if(1&n){var e=s.Nb();s.Mb(0,"ion-item",16),s.kc(1,m,2,1,"ion-avatar",17),s.Mb(2,"ion-label",18),s.Mb(3,"h2"),s.lc(4),s.Lb(),s.Mb(5,"h3"),s.lc(6),s.Xb(7,"number"),s.Lb(),s.Mb(8,"p"),s.lc(9),s.Lb(),s.Lb(),s.Mb(10,"ion-button",19),s.Ub("click",(function(n){s.hc(e);var a=t.$implicit;return s.Wb(2).markAsPaid(n,a)})),s.kc(11,f,2,0,"span",20),s.kc(12,g,2,0,"span",20),s.Lb(),s.Lb()}if(2&n){var a=t.$implicit;s.bc("routerLink",s.dc(11,d,"/profile/"+a.profile.user_id)),s.zb(1),s.bc("ngIf",a.profile.avatar),s.zb(3),s.mc(a.profile.name),s.zb(2),s.nc("Owed $",s.Yb(7,8,a.total,"1.2-2"),""),s.zb(3),s.nc("Bank account: ",a.profile.bank_account?a.profile.bank_account:"None set",""),s.zb(1),s.bc("disabled","userpaid"===a.status),s.zb(1),s.bc("ngIf","userpaid"!==a.status),s.zb(1),s.bc("ngIf","userpaid"===a.status)}}function h(n,t){if(1&n&&(s.Mb(0,"ion-list",13),s.Mb(1,"div",14),s.kc(2,y,13,13,"ion-item",15),s.Lb(),s.Lb()),2&n){var e=s.Wb();s.zb(2),s.bc("ngForOf",e.payments)}}var _=[{path:"",component:function(){function n(n,t,e){var a=this;this.adminService=n,this.alertCtrl=t,this.iab=e,this.payments=[],this.loading=!0,this.adminService.getPayments().then((function(n){a.loading=!1,a.payments=n})).catch((function(){a.loading=!1}))}return n.prototype.ngOnInit=function(){},n.prototype.getPayments=function(){},n.prototype.markAsPaid=function(n,t){var e=this;n.stopPropagation(),n.preventDefault(),this.alertCtrl.create({header:"Are you sure?",message:"You are about to mark this user as paid. Ensure you have paid this user before you continue.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Continue",handler:function(n){var a=t.total;t.status="userpaid",t.total=0,e.adminService.markAsPaid(t.profile.user_id).then((function(){})).catch((function(){t.status="",t.total=a}))}}]}).then((function(n){n.present()}))},n.prototype.markAllPaid=function(){var n=this;this.alertCtrl.create({header:"Are you sure?",message:"You are about to mark all payments as paid. Ensure you have paid all users before you continue.",buttons:[{text:"Cancel",role:"cancel",handler:function(n){}},{text:"Continue",handler:function(t){var e,a;try{for(var i=Object(c.i)(n.payments),o=i.next();!o.done;o=i.next()){var r=o.value;r.status="userpaid",r.total=0}}catch(s){e={error:s}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(e)throw e.error}}n.adminService.markAllAsPaid().then((function(){})).catch((function(){}))}}]}).then((function(n){n.present()}))},n.prototype.getBankFile=function(){var n=this;this.adminService.getBankFile().then((function(t){n.iab.create(t.file,"_system")}))},n.\u0275fac=function(t){return new(t||n)(s.Jb(b.a),s.Jb(o.a),s.Jb(l.a))},n.\u0275cmp=s.Db({type:n,selectors:[["app-manage-payments"]],decls:16,vars:3,consts:[["slot","start"],["defaultHref","/tabs/jobs"],[1,"manage-payments"],["class","manage-payments__loading",4,"ngIf"],["class","manage-payments__empty",4,"ngIf"],["class","manage-payments__list",4,"ngIf"],[1,"manage-payments-footer"],["color","primary",1,"manage-payments-footer__button",3,"click"],["color","light",1,"manage-payments-footer__button",3,"click"],[1,"manage-payments__loading"],["color","primary"],[1,"manage-payments__empty"],["name","card"],[1,"manage-payments__list"],[1,"manage-payments__list__user"],["routerDirection","forward",3,"routerLink",4,"ngFor","ngForOf"],["routerDirection","forward",3,"routerLink"],["slot","start",4,"ngIf"],[1,"ion-text-wrap"],["slot","end","fill","outline",3,"disabled","click"],[4,"ngIf"],[3,"src"]],template:function(n,t){1&n&&(s.Mb(0,"ion-header"),s.Mb(1,"ion-toolbar"),s.Mb(2,"ion-buttons",0),s.Mb(3,"ion-button"),s.Kb(4,"ion-back-button",1),s.Lb(),s.Lb(),s.Mb(5,"ion-title"),s.lc(6,"Manage Payments"),s.Lb(),s.Lb(),s.Lb(),s.Mb(7,"ion-content",2),s.kc(8,u,2,0,"div",3),s.kc(9,p,4,0,"div",4),s.kc(10,h,3,1,"ion-list",5),s.Lb(),s.Mb(11,"ion-footer",6),s.Mb(12,"ion-button",7),s.Ub("click",(function(){return t.markAllPaid()})),s.lc(13," Mark All Paid "),s.Lb(),s.Mb(14,"ion-button",8),s.Ub("click",(function(){return t.getBankFile()})),s.lc(15," Generate Bank File "),s.Lb(),s.Lb()),2&n&&(s.zb(8),s.bc("ngIf",t.loading),s.zb(1),s.bc("ngIf",t.payments.length<1&&!t.loading),s.zb(1),s.bc("ngIf",t.payments.length>0))},directives:[o.q,o.O,o.i,o.h,o.e,o.f,o.N,o.n,a.k,o.p,o.H,o.r,o.x,a.j,o.v,o.X,r.h,o.w,o.d],pipes:[a.d],styles:[".manage-payments[_ngcontent-%COMP%]   .manage-payments__loading[_ngcontent-%COMP%]{text-align:center;margin-top:60px}.manage-payments[_ngcontent-%COMP%]   .manage-payments__empty[_ngcontent-%COMP%]{text-align:center;opacity:.2;padding-top:60px;padding-bottom:60px}.manage-payments[_ngcontent-%COMP%]   .manage-payments__empty[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:60px}.manage-payments[_ngcontent-%COMP%]   .manage-payments__empty[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:5px 0 0;font-size:22px}.manage-payments-footer[_ngcontent-%COMP%]{text-align:center}"]}),n}()}],M=function(){function n(){}return n.\u0275mod=s.Hb({type:n}),n.\u0275inj=s.Gb({factory:function(t){return new(t||n)},imports:[[r.j.forChild(_)],r.j]}),n}(),k=function(){function n(){}return n.\u0275mod=s.Hb({type:n}),n.\u0275inj=s.Gb({factory:function(t){return new(t||n)},imports:[[a.b,i.a,o.P,M]]}),n}()}}]);