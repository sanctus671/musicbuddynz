(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"L/kL":function(n,i,t){"use strict";t.r(i),t.d(i,"GigsPageModule",(function(){return G}));var o=t("Valr"),e=t("QJY3"),c=t("sPEm"),r=t("DUip"),a=t("mrSG"),b=t("8zz/"),s=t("wd/R"),g=t("TYT/"),l=t("FSWo"),f=t("ri4K"),u=t("6adi");function d(n,i){if(1&n&&(g.Mb(0,"ion-badge",7),g.lc(1),g.Lb()),2&n){var t=g.Wb();g.zb(1),g.mc(t.notificationsCount)}}function p(n,i){1&n&&(g.Mb(0,"div",8),g.Kb(1,"ion-spinner",9),g.Lb())}function m(n,i){1&n&&(g.Mb(0,"ion-list-header"),g.lc(1,"Live"),g.Lb())}function h(n,i){1&n&&(g.Mb(0,"span"),g.lc(1,"Booked by"),g.Lb())}var M=function(n){return[n]};function v(n,i){if(1&n&&(g.Mb(0,"ion-item",13),g.Mb(1,"ion-avatar",14),g.Kb(2,"img",15),g.Lb(),g.Mb(3,"ion-label"),g.Mb(4,"h2"),g.kc(5,h,2,0,"span",11),g.lc(6),g.Lb(),g.Mb(7,"p"),g.lc(8),g.Lb(),g.Lb(),g.Lb()),2&n){var t=i.$implicit,o=g.Wb(2);g.bc("routerLink",g.dc(5,M,"/gigs/"+t.id)),g.zb(2),g.bc("src",t.profile.avatar,g.ic),g.zb(3),g.bc("ngIf",o.user.id!==t.user_id),g.zb(1),g.nc(" ",t.profile.name,""),g.zb(2),g.nc("Started ",o.formatLiveDate(t.date_required),"")}}function L(n,i){1&n&&(g.Mb(0,"ion-list-header"),g.lc(1,"Pending"),g.Lb())}function _(n,i){1&n&&(g.Mb(0,"span"),g.lc(1,"Booked by"),g.Lb())}function z(n,i){if(1&n&&(g.Mb(0,"ion-item",13),g.Mb(1,"ion-avatar",14),g.Kb(2,"img",15),g.Lb(),g.Mb(3,"ion-label"),g.Mb(4,"h2"),g.kc(5,_,2,0,"span",11),g.lc(6),g.Lb(),g.Mb(7,"p"),g.lc(8),g.Lb(),g.Lb(),g.Lb()),2&n){var t=i.$implicit,o=g.Wb(2);g.bc("routerLink",g.dc(5,M,"/gigs/"+t.id)),g.zb(2),g.bc("src",t.profile.avatar,g.ic),g.zb(3),g.bc("ngIf",o.user.id!==t.user_id),g.zb(1),g.nc(" ",t.profile.name,""),g.zb(2),g.nc("Booked for ",o.formatUpcomingDate(t.date_required),"")}}function k(n,i){1&n&&(g.Mb(0,"ion-list-header"),g.lc(1,"Upcoming"),g.Lb())}function y(n,i){1&n&&(g.Mb(0,"span"),g.lc(1,"Booked by"),g.Lb())}function O(n,i){if(1&n&&(g.Mb(0,"ion-item",13),g.Mb(1,"ion-avatar",14),g.Kb(2,"img",15),g.Lb(),g.Mb(3,"ion-label"),g.Mb(4,"h2"),g.kc(5,y,2,0,"span",11),g.lc(6),g.Lb(),g.Mb(7,"p"),g.lc(8),g.Lb(),g.Lb(),g.Lb()),2&n){var t=i.$implicit,o=g.Wb(2);g.bc("routerLink",g.dc(5,M,"/gigs/"+t.id)),g.zb(2),g.bc("src",t.profile.avatar,g.ic),g.zb(3),g.bc("ngIf",o.user.id!==t.user_id),g.zb(1),g.nc(" ",t.profile.name,""),g.zb(2),g.nc("Booked for ",o.formatUpcomingDate(t.date_required),"")}}function C(n,i){1&n&&(g.Mb(0,"ion-list-header"),g.lc(1,"Completed"),g.Lb())}function w(n,i){1&n&&(g.Mb(0,"span"),g.lc(1,"Booked by"),g.Lb())}function D(n,i){if(1&n&&(g.Mb(0,"ion-item",13),g.Mb(1,"ion-avatar",14),g.Kb(2,"img",15),g.Lb(),g.Mb(3,"ion-label"),g.Mb(4,"h2"),g.kc(5,w,2,0,"span",11),g.lc(6),g.Lb(),g.Mb(7,"p"),g.lc(8),g.Lb(),g.Lb(),g.Lb()),2&n){var t=i.$implicit,o=g.Wb(2);g.bc("routerLink",g.dc(5,M,"/gigs/"+t.id)),g.zb(2),g.bc("src",t.profile.avatar,g.ic),g.zb(3),g.bc("ngIf",o.user.id!==t.user_id),g.zb(1),g.nc(" ",t.profile.name,""),g.zb(2),g.nc("Played ",o.formatUpcomingDate(t.date_required),"")}}function P(n,i){if(1&n&&(g.Mb(0,"ion-list",10),g.kc(1,m,2,0,"ion-list-header",11),g.kc(2,v,9,7,"ion-item",12),g.kc(3,L,2,0,"ion-list-header",11),g.kc(4,z,9,7,"ion-item",12),g.kc(5,k,2,0,"ion-list-header",11),g.kc(6,O,9,7,"ion-item",12),g.kc(7,C,2,0,"ion-list-header",11),g.kc(8,D,9,7,"ion-item",12),g.Lb()),2&n){var t=g.Wb();g.zb(1),g.bc("ngIf",t.live.length>0),g.zb(1),g.bc("ngForOf",t.live),g.zb(1),g.bc("ngIf",t.pending.length>0),g.zb(1),g.bc("ngForOf",t.pending),g.zb(1),g.bc("ngIf",t.upcoming.length>0),g.zb(1),g.bc("ngForOf",t.upcoming),g.zb(1),g.bc("ngIf",t.completed.length>0),g.zb(1),g.bc("ngForOf",t.completed)}}var I=[{path:"",component:function(){function n(n,i,t,o,e){var c=this;this.gigService=n,this.authenticationService=i,this.notificationsService=t,this.ngZone=o,this.modalController=e,this.live=[],this.upcoming=[],this.completed=[],this.pending=[],this.loading=!0,this.authenticationService.getUserData().subscribe((function(n){c.user=n})),this.gigService.monitorGigs().subscribe((function(n){c.loading||c.getGigs()})),this.notificationsCount=0,this.notificationsService.monitorNotifications().subscribe((function(n){c.notificationsService.getNotificationCount().then((function(n){c.ngZone.run((function(){c.notificationsCount=n}))}))}))}return n.prototype.ngOnInit=function(){},n.prototype.ionViewDidEnter=function(){this.getGigs()},n.prototype.getGigs=function(){var n=this;this.gigService.getGigs().then((function(i){var t,o;console.log(i),n.live=[],n.upcoming=[],n.completed=[],n.pending=[];try{for(var e=Object(a.i)(i),c=e.next();!c.done;c=e.next()){var r=c.value;"live"===r.status?n.live.push(r):"upcoming"===r.status?n.upcoming.push(r):"completed"===r.status?n.completed.push(r):"pending"===r.status&&n.pending.push(r)}}catch(b){t={error:b}}finally{try{c&&!c.done&&(o=e.return)&&o.call(e)}finally{if(t)throw t.error}}n.loading=!1}))},n.prototype.formatUpcomingDate=function(n){var i=(new Date).getTimezoneOffset();return s(n).add(i,"m").format("Do MMMM [at] h:mma")},n.prototype.formatCompletedDate=function(n){var i=(new Date).getTimezoneOffset();return s(n).add(i,"m").format("Do MMMM [at] h:mma")},n.prototype.formatLiveDate=function(n){var i=(new Date).getTimezoneOffset();return s(n).add(i,"m").from(s())},n.prototype.openNotifications=function(){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.e)(this,(function(n){switch(n.label){case 0:return[4,this.modalController.create({component:b.a,componentProps:{}})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}}))}))},n.\u0275fac=function(i){return new(i||n)(g.Jb(l.a),g.Jb(f.a),g.Jb(u.a),g.Jb(g.z),g.Jb(c.S))},n.\u0275cmp=g.Db({type:n,selectors:[["app-gigs"]],decls:11,vars:3,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","notifications"],["class","notifications-badge","color","danger",4,"ngIf"],[1,"gigs"],["class","gigs__loading",4,"ngIf"],["class","gigs__list",4,"ngIf"],["color","danger",1,"notifications-badge"],[1,"gigs__loading"],["color","primary"],[1,"gigs__list"],[4,"ngIf"],["routerDirection","forward",3,"routerLink",4,"ngFor","ngForOf"],["routerDirection","forward",3,"routerLink"],["slot","start"],[3,"src"]],template:function(n,i){1&n&&(g.Mb(0,"ion-header"),g.Mb(1,"ion-toolbar"),g.Mb(2,"ion-title"),g.lc(3,"My Gigs"),g.Lb(),g.Mb(4,"ion-buttons",0),g.Mb(5,"ion-button",1),g.Ub("click",(function(){return i.openNotifications()})),g.Kb(6,"ion-icon",2),g.kc(7,d,2,1,"ion-badge",3),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Mb(8,"ion-content",4),g.kc(9,p,2,0,"div",5),g.kc(10,P,9,8,"ion-list",6),g.Lb()),2&n&&(g.zb(7),g.bc("ngIf",i.notificationsCount>0),g.zb(2),g.bc("ngIf",i.loading),g.zb(1),g.bc("ngIf",!i.loading))},directives:[c.q,c.O,c.N,c.i,c.h,c.r,o.k,c.n,c.g,c.H,c.x,o.j,c.y,c.v,c.X,r.h,c.d,c.w],styles:[".gigs[_ngcontent-%COMP%]   .gigs__loading[_ngcontent-%COMP%]{text-align:center;margin-top:60px}.gigs[_ngcontent-%COMP%]   .gigs__list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:20px;padding-top:10px}.gigs[_ngcontent-%COMP%]   .gigs__list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]:first-child{margin-top:0;padding-top:0}.gigs[_ngcontent-%COMP%]   .gigs__list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:0}"]}),n}()}],S=function(){function n(){}return n.\u0275mod=g.Hb({type:n}),n.\u0275inj=g.Gb({factory:function(i){return new(i||n)},imports:[[r.j.forChild(I)],r.j]}),n}(),G=function(){function n(){}return n.\u0275mod=g.Hb({type:n}),n.\u0275inj=g.Gb({factory:function(i){return new(i||n)},imports:[[o.b,e.a,c.P,S]]}),n}()}}]);